{"version":3,"sources":["webpack:///webpack/bootstrap 3e43eb6e7c111c1547dd","webpack:///./server/Models/Users.js","webpack:///external \"mongoose\"","webpack:///external \"express\"","webpack:///external \"passport\"","webpack:///./server/db.js","webpack:///external \"passport-local\"","webpack:///external \"jsonwebtoken\"","webpack:///./config/index.json","webpack:///external \"webpack\"","webpack:///./server/server.js","webpack:///external \"socket.io\"","webpack:///./server/passport/local-signup.js","webpack:///external \"bcryptjs\"","webpack:///./server/passport/local-login.js","webpack:///external \"body-parser\"","webpack:///external \"source-map-support\"","webpack:///./server/auth-check.js","webpack:///./server/routes/api.js","webpack:///./server/Models/Games.js","webpack:///./server/routes/auth.js","webpack:///external \"validator\"","webpack:///external \"path\"","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///./webpack.config.js","webpack:///external \"extract-text-webpack-plugin\"","webpack:///./server/broadcast.js"],"names":["UserSchema","Schema","username","String","password","methods","comparePassword","callback","compare","pre","saveHook","next","user","isModified","genSalt","saltError","salt","hash","hashError","model","connect","then","console","log","Promse","global","Promise","catch","err","ABSPATH","install","app","use","static","json","initialize","process","env","NODE_ENV","webpack","require","webpackDevMiddleware","webpackHotMiddleware","config","entry","push","plugins","HotModuleReplacementPlugin","bundler","noInfo","server","listen","io","set","get","req","res","sendFile","on","socket","id","data","game_id","join","to","broadcast","emit","chat","of","chat_id","LocalStrategy","usernameField","passwordField","session","passReqToCallback","done","newUser","save","strat","userData","trim","findOne","error","Error","payload","sub","_id","token","sign","jwtSecret","authCheck","headers","authorization","status","send","split","verify","decodedToken","userId","findById","router","Router","find","games","params","game","players","post","newGame","owner","body","title","user_id","doc","msg","updatedGame","newGameState","newPlayer","length","ImgSchema","name","url","CardSchema","ruleText","value","Number","suit","image","PlayerSchema","health","type","default","GameSchema","gameCards","statics","player","findByIdAndUpdate","$push","Game","module","exports","authenticate","success","message","extractTextPlugin","vendor","output","path","__dirname","filename","optimize","CommonsChunkPlugin","loaders","test","loader","query","presets","modules","localIdentName","devServer","port","contentBase","proxy","target","devtool","room","in"],"mappings":"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","file":"server.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3e43eb6e7c111c1547dd","import db from '../db.js';\nimport mongoose from 'mongoose';\nimport bcrypt from 'bcryptjs';\n\n\nconst UserSchema = new mongoose.Schema({\n    username: String,\n    password: String\n});\n\nUserSchema.methods.comparePassword = function comparePassword(password,callback) {\n    bcrypt.compare(password, this.password, callback);\n};\n\n\n// a very cool way to gen salts /hash << using mongoose middleware\nUserSchema.pre('save', function saveHook(next) { \n    const user = this;\n\n    if(!user.isModified('password')) { return next()};\n\n    return bcrypt.genSalt((saltError, salt) => {\n        if (saltError) {return next(saltError); }\n\n        return bcrypt.hash(user.password, salt, (hashError, hash) => {\n            if(hashError) { return next(); }\n\n            user.password = hash;\n\n            return next();\n        });\n    });\n});\n\nexport default mongoose.model('User', UserSchema);\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/Models/Users.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 3\n// module chunks = 0","import mongoose from 'mongoose';\n\nmongoose.connect('mongodb://localhost/genesis')\n.then( () => {\n    console.log('mongodb connected');\n    mongoose.Promse = global.Promise;\n}).catch(err => {\n    console.log('error connecting: ', err);\n});\n\nexport default mongoose;\n\n\n// WEBPACK FOOTER //\n// ./server/db.js","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 6\n// module chunks = 0","module.exports = {\"jwtSecret\":\"zack and logan\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/index.json\n// module id = 7\n// module chunks = 0","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 8\n// module chunks = 0","const ABSPATH = 'C:\\\\Users\\\\lfigg\\\\Documents\\\\GitHub\\\\Genesis\\\\static\\\\index.html'\n\nimport socket from 'socket.io';\n\nimport passport from 'passport';\nimport localSignupStrategy from './passport/local-signup.js';\nimport localLoginStrategy from './passport/local-login.js';\n\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport SourceMapSupport from 'source-map-support';\n\nimport authCheck from './auth-check.js';\nimport api from './routes/api.js';\nimport auth from './routes/auth.js';\nimport path from 'path';\n\n\n\nSourceMapSupport.install();\n\nlet app = express();\n\n//middleware\napp.use(express.static('static'));\napp.use(bodyParser.json());\napp.use(passport.initialize());\napp.use('/api', authCheck);\n\n\n//load strategies\npassport.use('local-signup', localSignupStrategy);\npassport.use('local-login', localLoginStrategy);\n\n\n//load routes\napp.use('/api', api );\napp.use('/auth', auth);\n\n\n//dev test\nif (process.env.NODE_ENV !== 'production') {\n    const webpack = require('webpack');\n    const webpackDevMiddleware = require('webpack-dev-middleware');\n    const webpackHotMiddleware = require('webpack-hot-middleware');\n\n    const config = require('../webpack.config');\n    config.entry.app.push('webpack-hot-middleware/client', 'webpack/hot/only-dev-server');\n    config.plugins.push(new webpack.HotModuleReplacementPlugin());\n\n    const bundler = webpack(config);\n\n    app.use(webpackDevMiddleware(bundler, {noInfo: true}));\n    app.use(webpackHotMiddleware(bundler, {log: console.log }))\n}\n\nvar server = app.listen(3000, function () {\n    console.log('App started at port 3000');\n});\n\nconst io = socket(server);\n\n\n//this allows me to access io in the request response cycle\napp.set('io', io);\n\n\n\napp.get('/*', function(req,res){\n    res.sendFile(ABSPATH);\n})\n\n\n\nio.on('connection' , (socket) => {\n    console.log('-----SOCKET PRINTING----');\n    console.log(socket.id);\n\n    socket.on('JOIN', data => {\n        console.log('Socket joining gameId:', data.game_id);\n        socket.join(data.game_id);\n        \n        socket.to(data.game_id).broadcast.emit('USER_JOINED');\n        \n    })\n});\n\n\n\nvar chat = io.of('/chat');\nchat.on('connection', socket => {\n    console.log(`--------Chat Socket ID:${socket.id} connecting--------`);\n\n    socket.on('JOIN', data => {\n        socket.join(data.chat_id);\n\n        console.log('---------------------Chat socket joining room -----------------');\n        console.log(data.chat_id);\n        console.log();\n        \n        socket.username = data.username;\n    })\n\n    socket.on('SEND_MESSAGE', function(data) {\n        console.log('sending message');\n        console.log(data);\n        io.to(data.chat_id).emit('RECIEVE_MESSAGE', data);\n    })\n})\n\n\n// WEBPACK FOOTER //\n// ./server/server.js","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 10\n// module chunks = 0","\n// check to make sure i am doing somethign twice.. later after this is done\nimport User from '../Models/Users';\nimport {Strategy as PassportLocalStrategy}  from 'passport-local';\n\nconst LocalStrategy = new PassportLocalStrategy({\n    usernameField: 'username',\n    passwordField: 'password',\n    session: false,\n    passReqToCallback: true\n},(req, username, password, done) => {\n    const newUser = new User({username: username, password: password});\n    console.log('Creating New user', newUser);\n    newUser.save((err) => {\n        if (err) {return done(err);}\n\n        return done(null);\n    });\n});\n\nexport default LocalStrategy;\n\n\n// WEBPACK FOOTER //\n// ./server/passport/local-signup.js","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 12\n// module chunks = 0","import jwt from 'jsonwebtoken';\nimport User from '../Models/Users.js';\nimport {Strategy as PassportLocalStrategy} from 'passport-local';\nimport config from '../../config/index.json';\n\n\nconst strat = new PassportLocalStrategy({\n    usernameField: 'username',\n    passwordField: 'password',\n    session: false,\n    passReqToCallback: true\n}, (req,username,password,done) => {\n\n    const userData = {\n        username: username.trim(),\n        password: password.trim()\n    };\n\n    User.findOne({username: userData.username})\n    .then(user => {\n        if(!user) {\n            const error = new Error('Incorrect Email or Password');\n            console.log(user);\n            done(error);\n        }\n\n        const payload = {\n            sub: user._id\n        };\n\n        const token = jwt.sign(payload, config.jwtSecret);\n\n        console.log(\"Logging Token:\", token);\n\n        const data = {\n            username: user.username\n        };\n\n        done(null, token, data);\n    })\n    .catch(err => {\n        done(err);\n    })\n})\n\nexport default strat;\n\n\n// WEBPACK FOOTER //\n// ./server/passport/local-login.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"source-map-support\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map-support\"\n// module id = 15\n// module chunks = 0","import jwt from 'jsonwebtoken';\nimport User from '../server/Models/Users.js';\nimport config from '../config/index.json';\n\n\nconst authCheck = (req, res, next) => {\n    if(!req.headers.authorization) {\n        res.status(401).send();\n    }\n\n    // this splits the value(token) part of the Authorization header\n    const token = req.headers.authorization.split(' ')[1];\n\n    jwt.verify(token, config.jwtSecret, function( err, decodedToken) {\n\n        if(err){\n            console.log(err);\n        }\n        const userId = decodedToken.sub;\n        \n        User.findById(userId)\n        .then(user => {\n            if(!user){\n                res.status(401).send();\n            }\n\n            //saves the decoded token information on the request object\n            //for user later on in the request life cycle\n            \n            req.user = user;\n            console.log('-------logging user from token-------');\n            console.log(user);\n\n            next();\n        })\n        .catch(error => {\n            console.log(error);\n        })\n\n    })    \n}\n\nexport default authCheck;\n\n\n// WEBPACK FOOTER //\n// ./server/auth-check.js","import express from 'express';\nimport Game from '../Models/Games.js';\nimport User from '../Models/Users.js';\nimport broadcast from '../broadcast.js';\n\nconst router = express.Router();\n\nrouter.get('/games', (req, res, next) => {\n   Game.find({}).then( function(games) {\n       console.log(games);\n       res.json(games);\n   })\n});\n\n\nrouter.get('/games/:id', (req,res,next) => {\n\n    Game.findById(req.params.id)\n    \n    .then( game => {\n\n        // if(err) { console.log(err)};\n\n        console.log('-------------- Logging Game After Populate Call -------------')\n        console.log(game);\n        console.log();\n\n        console.log('-----Attempting to log username directly from game.player object---------');\n        console.log(game.players[0].username);\n\n        if(!game) {res.status(400).send('game not found')}\n\n        res.json(game);\n    })\n    .catch( err => {\n        console.log(err);\n    })\n\n\n\n    // if (req.params.id === game._id){\n    //     console.log('found the game mother fucker');\n    //     res.json(game);\n    //  } else {\n    //      console.log('gameID does not match');\n    //      res.status(500).send('game not found');\n    //  }\n\n});\n\nrouter.post('/games/create' , (req, res, next) => {\n    const newGame = new Game({owner: req.body.owner, title: req.body.title});\n\n    console.log('------------logging player before save----------');\n    console.log(req.user);\n    console.log();\n\n\n    newGame.players.push({user_id:req.user._id, username: req.user.username});\n    console.log('logging new Game', newGame);\n\n    newGame.save()\n    .then(doc => {\n        console.log(doc);\n        res.json({msg:'ok', game_id: doc._id});\n    })\n    .catch(err => {\n        console.log(err);\n    })\n})\n\nrouter.post('/games/join', (req,res,next) => {\n    //expects a game id and a user object <<<< (not just an id)\n    console.log('-------checking req.user ---------');\n    console.log(req.user);\n    console.log();\n    \n    Game.join(req.body.game_id, req.user)\n    .then(updatedGame => {\n        const data = {\n            newGameState: updatedGame,\n            newPlayer: updatedGame.players[players.length-1]\n        }\n        console.log(updatedGame);\n        broadcast(req.app.get('io'), req.body.game_id, 'PLAYER_JOINED', data);\n        res.json(updatedGame);\n    })\n})\n\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./server/routes/api.js","import db from '../db.js';\nimport mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\nconst ImgSchema = new Schema({\n    name: String,\n    url: String,\n})\n\nconst CardSchema = new Schema({\n    name: String,\n    ruleText: String,\n    value: Number,\n    suit: String,\n    image: ImgSchema\n})\n\nconst PlayerSchema = new Schema({\n    user_id: String,\n    username: String,\n    health: {type:Number, default: 100},\n})\n\n// const Player = mongoose.model('Player', PlayerSchema);\n\nconst GameSchema = new Schema({\n    owner: String,\n    title: String,\n    gameCards: [CardSchema],\n    players:[PlayerSchema]\n});\n\n// G\n// ameSchema.methods.createGame = function createGame(user, title) {\n//     this.model('Game').create({owner:user.username, title: title, players: players.pus})\n// }\n\nGameSchema.statics.join = function join(game_id, user) {\n    const player = {\n        user_id: user._id,\n        username: user.username,\n    }\n\n    return this.model('Game').findByIdAndUpdate(game_id, { $push: {players: player }})\n\n}\n\nvar Game = mongoose.model('Game', GameSchema);\n\nmodule.exports = Game;\n\n\n// WEBPACK FOOTER //\n// ./server/Models/Games.js","import express from 'express';\nimport validator from 'validator';\nimport passport from 'passport';\n\nconst router = new express.Router();\n\n//probably a syntatical error here (fixed)\n\nrouter.post('/signup', (req, res, next) => { \n passport.authenticate('local-signup', (err)=>{ \n\n    console.log('Code executing in server side /signup route');\n\n        if(err) {\n            console.log(err);\n\n           return res.status(400).json({\n                success:false,\n                message: 'error in signup post',\n            })\n        }\n\n        return res.status(200).json({\n            success: true,\n            message: 'You have created a user'\n        });\n    })(req,res,next);\n})\n\n\nrouter.post('/login', (req,res,next) => {\n    passport.authenticate('local-login', (err, token, userData)=>{\n    if (err) {\n        console.log(err);\n        res.status(400).json({\n            success: false,\n            message: err.message\n        });\n    }\n\n    res.json({\n        success:true,\n        message: 'You have logged in',\n        token,\n        user:userData\n    });\n    \n})(req,res,next);\n})\n\nexport default router;\n\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/auth.js","module.exports = require(\"validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"validator\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 23\n// module chunks = 0","const webpack = require('webpack');\nconst extractTextPlugin = require('extract-text-webpack-plugin');\n\nmodule.exports = {\n    entry: {\n        app: ['./src/index.jsx'],\n        vendor: ['react','react-dom','react-router','isomorphic-fetch','babel-polyfill', 'socket.io-client'],\n    },\n    output:{\n        path: __dirname + './static',\n        filename: 'app.bundle.js',\n    },\n    plugins: [\n        new webpack.optimize.CommonsChunkPlugin({name: 'vendor', filename: 'vendor.bundle.js'})\n    ],\n\n    module: {\n        loaders:[\n            {\n                test: /\\.jsx$/,\n                loader: 'babel-loader',\n                query: {\n                    presets: ['react', 'es2015'],\n                    plugins: ['transform-es2015-destructuring', 'transform-object-rest-spread']\n                }\n            },\n            {\n                test: /\\.css$/,\n                loader: 'style-loader'\n            },\n            {\n                test: /\\.css$/,\n                loader: 'css-loader',\n                query: {\n                    modules: true,\n                    localIdentName: '[name]__[local]___[hash:base64:5]',\n                    plugins: [\n                        new extractTextPlugin('./src/css/styles.css')\n                    ]\n                }\n            }\n        ]\n    },\n\n    devServer: {\n        port: 8000,\n        contentBase: 'static',\n        proxy: {\n            '/api/*' : {\n                target: 'http://localhost:3000'\n            }\n        }\n    },\n\n    devtool: 'source-map'\n}\n\n\n// WEBPACK FOOTER //\n// ./webpack.config.js","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 25\n// module chunks = 0","const broadcast = (io, room, message, data) => {\n    console.log('broadcast', room, message, data);\n\n    io.in(room).emit(message, data)\n};\n\nexport default broadcast;\n\n\n// WEBPACK FOOTER //\n// ./server/broadcast.js"],"sourceRoot":""}