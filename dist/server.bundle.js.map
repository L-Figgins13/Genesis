{"version":3,"sources":["webpack:///webpack/bootstrap 8cbcdd391ab82b2e7f62","webpack:///./server/Models/Users.js","webpack:///external \"mongoose\"","webpack:///./server/logger.js","webpack:///external \"express\"","webpack:///external \"passport\"","webpack:///./server/db.js","webpack:///external \"passport-local\"","webpack:///external \"jsonwebtoken\"","webpack:///./config/index.json","webpack:///external \"webpack\"","webpack:///./server/server.js","webpack:///external \"socket.io\"","webpack:///./server/passport/local-signup.js","webpack:///external \"bcryptjs\"","webpack:///./server/passport/local-login.js","webpack:///external \"body-parser\"","webpack:///external \"source-map-support\"","webpack:///./server/auth-check.js","webpack:///./server/routes/api.js","webpack:///./server/Models/Games.js","webpack:///./server/constants.js","webpack:///./server/broadcast.js","webpack:///./server/routes/auth.js","webpack:///external \"validator\"","webpack:///external \"path\"","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///./webpack.config.js","webpack:///external \"extract-text-webpack-plugin\""],"names":["Schema","StatsSchema","wins","type","Number","default","losses","UserSchema","username","String","password","stats","methods","comparePassword","callback","compare","pre","saveHook","next","user","isModified","genSalt","saltError","salt","hash","hashError","User","model","Logger","logger","text","name","console","log","connect","then","Promse","global","Promise","catch","err","ABSPATH","install","app","use","static","json","initialize","process","env","NODE_ENV","webpack","require","webpackDevMiddleware","webpackHotMiddleware","config","entry","push","plugins","HotModuleReplacementPlugin","bundler","noInfo","server","listen","io","set","get","req","res","sendFile","on","socket","id","data","game_id","join","to","broadcast","emit","chat","of","chat_id","LocalStrategy","usernameField","passwordField","session","passReqToCallback","done","newUser","save","strat","userData","trim","findOne","error","Error","payload","sub","_id","token","sign","jwtSecret","authCheck","headers","authorization","status","send","split","verify","decodedToken","userId","findById","router","Router","find","games","params","game","JSON","stringify","post","newGame","owner","body","title","players","user_id","doc","msg","result","ImgSchema","url","CardSchema","ruleText","value","suit","image","PlayerSchema","health","GameSchema","hasStarted","Boolean","gameCards","statics","gameID","player","promise","resolve","reject","message","errCode","success","MAX_PLAYERS","length","some","x","findByIdAndUpdate","$push","updatedGame","Game","module","exports","constants","room","in","authenticate","extractTextPlugin","vendor","output","path","__dirname","filename","optimize","CommonsChunkPlugin","loaders","test","loader","query","presets","modules","localIdentName","devServer","port","contentBase","proxy","target","devtool"],"mappings":"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","file":"server.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8cbcdd391ab82b2e7f62","import db from '../db.js';\r\nimport mongoose from 'mongoose';\r\nimport bcrypt from 'bcryptjs';\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\n\r\nconst StatsSchema = new Schema({\r\n    wins: {type:Number, default: 0},\r\n    losses: {type: Number, default: 0}\r\n})\r\n\r\nconst UserSchema = new Schema({\r\n    username: String,\r\n    password: String,\r\n    stats: {type:StatsSchema, default: StatsSchema}\r\n});\r\n\r\n\r\n\r\nUserSchema.methods.comparePassword = function comparePassword(password,callback) {\r\n    bcrypt.compare(password, this.password, callback);\r\n};\r\n\r\n\r\n// a very cool way to gen salts /hash << using mongoose middleware\r\nUserSchema.pre('save', function saveHook(next) { \r\n    const user = this;\r\n\r\n    if(!user.isModified('password')) { return next()};\r\n\r\n    return bcrypt.genSalt((saltError, salt) => {\r\n        if (saltError) {return next(saltError); }\r\n\r\n        return bcrypt.hash(user.password, salt, (hashError, hash) => {\r\n            if(hashError) { return next(); }\r\n\r\n            user.password = hash;\r\n\r\n            return next();\r\n        });\r\n    });\r\n});\r\n\r\nconst User = mongoose.model('User', UserSchema);\r\n\r\nexport default User;\r\n\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/Models/Users.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 1\n// module chunks = 0","\r\n\r\nvar Logger = function logger(text, name) {\r\n    console.log(`---------Logging ${name}------------`);\r\n    console.log(text);\r\n    console.log(`---------- END ${name}--------------`);\r\n    console.log();\r\n    console.log();\r\n}\r\n\r\nexport default Logger;\n\n\n// WEBPACK FOOTER //\n// ./server/logger.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"passport\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport\"\n// module id = 4\n// module chunks = 0","import mongoose from 'mongoose';\r\n\r\nmongoose.connect('mongodb://localhost/genesis')\r\n.then( () => {\r\n    console.log('mongodb connected');\r\n    mongoose.Promse = global.Promise;\r\n}).catch(err => {\r\n    console.log('error connecting: ', err);\r\n});\r\n\r\nexport default mongoose;\n\n\n// WEBPACK FOOTER //\n// ./server/db.js","module.exports = require(\"passport-local\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"passport-local\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 7\n// module chunks = 0","module.exports = {\"jwtSecret\":\"zack and logan\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/index.json\n// module id = 8\n// module chunks = 0","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 9\n// module chunks = 0","const ABSPATH = 'C:\\\\Users\\\\lfigg\\\\Documents\\\\GitHub\\\\Genesis\\\\static\\\\index.html'\r\n\r\nimport socket from 'socket.io';\r\n\r\nimport passport from 'passport';\r\nimport localSignupStrategy from './passport/local-signup.js';\r\nimport localLoginStrategy from './passport/local-login.js';\r\nimport Logger from './logger.js';\r\n\r\nimport express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport SourceMapSupport from 'source-map-support';\r\n\r\nimport authCheck from './auth-check.js';\r\nimport api from './routes/api.js';\r\nimport auth from './routes/auth.js';\r\nimport path from 'path';\r\n\r\n\r\n\r\nSourceMapSupport.install();\r\n\r\nlet app = express();\r\n\r\n//middleware\r\napp.use(express.static('static'));\r\napp.use(bodyParser.json());\r\napp.use(passport.initialize());\r\napp.use('/api', authCheck);\r\n\r\n\r\n//load strategies\r\npassport.use('local-signup', localSignupStrategy);\r\npassport.use('local-login', localLoginStrategy);\r\n\r\n\r\n//load routes\r\napp.use('/api', api );\r\napp.use('/auth', auth);\r\n\r\n\r\n//dev test\r\nif (process.env.NODE_ENV !== 'production') {\r\n    const webpack = require('webpack');\r\n    const webpackDevMiddleware = require('webpack-dev-middleware');\r\n    const webpackHotMiddleware = require('webpack-hot-middleware');\r\n\r\n    const config = require('../webpack.config');\r\n    config.entry.app.push('webpack-hot-middleware/client', 'webpack/hot/only-dev-server');\r\n    config.plugins.push(new webpack.HotModuleReplacementPlugin());\r\n\r\n    const bundler = webpack(config);\r\n\r\n    app.use(webpackDevMiddleware(bundler, {noInfo: true}));\r\n    app.use(webpackHotMiddleware(bundler, {log: console.log }))\r\n}\r\n\r\nvar server = app.listen(3000, function () {\r\n    console.log('App started at port 3000');\r\n});\r\n\r\nconst io = socket(server);\r\n\r\n\r\n//this allows me to access io in the request response cycle\r\napp.set('io', io);\r\n\r\n\r\n\r\napp.get('/*', function(req,res){\r\n    res.sendFile(ABSPATH);\r\n})\r\n\r\n\r\n\r\nio.on('connection' , (socket) => {\r\n    console.log('-----SOCKET PRINTING----');\r\n    console.log(socket.id);\r\n\r\n    socket.on('JOIN', data => {\r\n        console.log('Socket joining gameId:', data.game_id);\r\n        socket.join(data.game_id);\r\n        \r\n        socket.to(data.game_id).broadcast.emit('USER_JOINED');\r\n        \r\n    })\r\n});\r\n\r\nio.on('disconnect', socket => {\r\n    console.log('Socket ID:', socket.id, 'disconnecting');\r\n\r\n})\r\n\r\n\r\n\r\nvar chat = io.of('/chat');\r\nchat.on('connection', socket => {\r\n    console.log(`--------Chat Socket ID:${socket.id} connecting--------`);\r\n\r\n    socket.on('JOIN', data => {\r\n        socket.join(data.game_id);\r\n        Logger(data.game_id, 'Joining Chat with game ID');\r\n        socket.username = data.username;\r\n    })\r\n\r\n    socket.on('SEND_MESSAGE', function(data) {\r\n        console.log('sending message');\r\n        console.log(data);\r\n        socket.to(data.chat_id).emit('RECIEVE_MESSAGE', data);\r\n    })\r\n})\r\n\r\nchat.on('disconnect', socket => {\r\n    console.log('Socket ID:', socket.id, 'disconnecting');\r\n})\n\n\n// WEBPACK FOOTER //\n// ./server/server.js","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 11\n// module chunks = 0","\r\n// check to make sure i am doing somethign twice.. later after this is done\r\nimport User from '../Models/Users';\r\nimport {Strategy as PassportLocalStrategy}  from 'passport-local';\r\n\r\nconst LocalStrategy = new PassportLocalStrategy({\r\n    usernameField: 'username',\r\n    passwordField: 'password',\r\n    session: false,\r\n    passReqToCallback: true\r\n},(req, username, password, done) => {\r\n    const newUser = new User({username: username, password: password});\r\n    console.log('Creating New user', newUser);\r\n    newUser.save((err) => {\r\n        if (err) {return done(err);}\r\n\r\n        return done(null);\r\n    });\r\n});\r\n\r\nexport default LocalStrategy;\n\n\n// WEBPACK FOOTER //\n// ./server/passport/local-signup.js","module.exports = require(\"bcryptjs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcryptjs\"\n// module id = 13\n// module chunks = 0","import jwt from 'jsonwebtoken';\r\nimport User from '../Models/Users.js';\r\nimport {Strategy as PassportLocalStrategy} from 'passport-local';\r\nimport config from '../../config/index.json';\r\n\r\n\r\n\r\nconst strat = new PassportLocalStrategy({\r\n    usernameField: 'username',\r\n    passwordField: 'password',\r\n    session: false,\r\n    passReqToCallback: true\r\n}, (req,username,password,done) => {\r\n\r\n    const userData = {\r\n        username: username.trim(),\r\n        password: password.trim()\r\n    };\r\n\r\n    User.findOne({username: userData.username})\r\n    .then(user => {\r\n        if(!user) {\r\n            const error = new Error('Incorrect Email or Password');\r\n            console.log(user);\r\n            done(error);\r\n        }\r\n        \r\n        const payload = {\r\n            sub: user._id\r\n        };\r\n\r\n        const token = jwt.sign(payload, config.jwtSecret);\r\n\r\n        const data = {\r\n            id: user._id,\r\n            username: user.username\r\n        };\r\n        console.log('hello from local-login');\r\n        // Logger(data, 'user passed to login.jsx');\r\n\r\n        done(null, token, data);\r\n    })\r\n    .catch(err => {\r\n        done(err);\r\n    })\r\n})\r\n\r\nexport default strat;\n\n\n// WEBPACK FOOTER //\n// ./server/passport/local-login.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"source-map-support\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"source-map-support\"\n// module id = 16\n// module chunks = 0","import jwt from 'jsonwebtoken';\r\nimport User from '../server/Models/Users.js';\r\nimport config from '../config/index.json';\r\n\r\n\r\nconst authCheck = (req, res, next) => {\r\n    if(!req.headers.authorization) {\r\n        res.status(401).send();\r\n    }\r\n\r\n    // this splits the value(token) part of the Authorization header\r\n    const token = req.headers.authorization.split(' ')[1];\r\n\r\n    jwt.verify(token, config.jwtSecret, function( err, decodedToken) {\r\n\r\n        if(err){\r\n            console.log(err);\r\n        }\r\n        const userId = decodedToken.sub;\r\n        \r\n        User.findById(userId)\r\n        .then(user => {\r\n            if(!user){\r\n                res.status(401).send();\r\n            }\r\n\r\n            //saves the decoded token information on the request object\r\n            //for user later on in the request life cycle\r\n            \r\n            req.user = user;\r\n            console.log('-------logging user from token-------');\r\n            console.log(user);\r\n\r\n            next();\r\n        })\r\n        .catch(error => {\r\n            console.log(error);\r\n        })\r\n\r\n    })    \r\n}\r\n\r\nexport default authCheck;\n\n\n// WEBPACK FOOTER //\n// ./server/auth-check.js","import express from 'express';\r\nimport Game from '../Models/Games.js';\r\nimport User from '../Models/Users.js';\r\nimport broadcast from '../broadcast.js';\r\nimport Logger from '../logger.js'\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get('/games', (req, res, next) => {\r\n   Game.find({}).then( function(games) {\r\n       console.log(games);\r\n       res.json(games);\r\n   })\r\n});\r\n\r\n\r\nrouter.get('/games/:id', (req,res,next) => {\r\n\r\n    Game.findById(req.params.id)\r\n    .then( game => {\r\n\r\n        // if(err) { console.log(err)};\r\n\r\n       Logger(JSON.stringify(game), 'GET /games/:id');\r\n\r\n        if(!game) {res.status(400).send('game not found')}\r\n\r\n        res.json(game);\r\n    })\r\n    .catch( err => {\r\n        console.log(err);\r\n    })\r\n});\r\n\r\nrouter.post('/games/create' , (req, res, next) => {\r\n    const newGame = new Game({owner: req.body.owner, title: req.body.title});\r\n\r\n    console.log('------------logging player before save----------');\r\n    console.log(req.user);\r\n    console.log();\r\n\r\n\r\n    newGame.players.push({user_id:req.user._id, username: req.user.username});\r\n    console.log('logging new Game', newGame);\r\n\r\n    newGame.save()\r\n    .then(doc => {\r\n        console.log(doc);\r\n        res.json({msg:'ok', game_id: doc._id});\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n    })\r\n})\r\n\r\nrouter.post('/games/join', (req,res,next) => {\r\n    Logger(req.body.game_id, 'Game ID FROM REQUEST');\r\n    \r\n    Game.join(req.body.game_id, req.user)\r\n    .then(result => {\r\n     \r\n        console.log(JSON.stringify(result));\r\n        // broadcast(req.app.get('io'), req.body.game_id, 'PLAYER_JOINED', data);\r\n        res.status(200).json(result);\r\n    })\r\n    .catch(error => {\r\n        Logger(JSON.stringify(error), 'Error in /games/join');\r\n        res.json(error);\r\n\r\n        \r\n    })\r\n})\r\n\r\n\r\n//----------- Start User (Profile) Routes-------------------\r\n\r\nrouter.get('/users/:id', (req, res, next) => {\r\n    \r\n    console.log('this route even being touched');\r\n    // Logger(req.params.id, 'URL PARAMS');\r\n\r\n    User.findById(req.params.id)\r\n    .then(user => {\r\n        Logger(JSON.stringify(user), 'User returned from database');\r\n\r\n        console.log('testing webpack');\r\n\r\n        res.status(200).json(user);\r\n    })\r\n    .catch(err => {\r\n        Logger(err, 'Error Object in route /users/:id');\r\n\r\n    })\r\n   \r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default router;\n\n\n// WEBPACK FOOTER //\n// ./server/routes/api.js","import db from '../db.js';\r\nimport mongoose from 'mongoose';\r\nimport Logger from '../logger.js';\r\nimport constants from '../constants.js';\r\n\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\nconst ImgSchema = new Schema({\r\n    name: String,\r\n    url: String,\r\n})\r\n\r\nconst CardSchema = new Schema({\r\n    name: String,\r\n    ruleText: String,\r\n    value: Number,\r\n    suit: String,\r\n    image: ImgSchema\r\n})\r\n\r\nconst PlayerSchema = new Schema({\r\n    user_id: String,\r\n    username: String,\r\n    health: {type:Number, default: 100},\r\n})\r\n\r\n// const Player = mongoose.model('Player', PlayerSchema);\r\n\r\nconst GameSchema = new Schema({\r\n    owner: String,\r\n    title: String,\r\n    hasStarted: {type:Boolean, default: false},\r\n    gameCards: [CardSchema],\r\n    players:[PlayerSchema] \r\n})\r\n\r\nGameSchema.statics.join = function join(gameID, user) {\r\n    //stages player to be added to the game\r\n    const player = {\r\n        user_id: user._id,\r\n        username: user.username,\r\n    }\r\n\r\n    \r\n\r\n   \r\n    //creates a promise to be returned so that the final .then() will be in the route\r\n    const promise = new Promise ((resolve, reject) => {\r\n        this.model('Game').findById(gameID)\r\n        .then(game => {\r\n            const data = {\r\n                message: '',\r\n                errCode: 0,\r\n                success: false,\r\n                player: {},\r\n            }\r\n\r\n            Logger(constants.MAX_PLAYERS, 'MAX_PLAYER CONSTANT');\r\n\r\n            if(game.players.length >= constants.MAX_PLAYERS) {\r\n                data.message = 'Game is Full';\r\n                data.errCode = 1;\r\n                return reject(data);\r\n                Logger(data, 'Data: ');\r\n            } else if (game.hasStarted) {\r\n                data.message = 'Sorry the Game Has Already Started';\r\n                data.errCode = 2;\r\n                reject(data);\r\n                Logger(data, 'Data: ');\r\n            } else if (game.players.some(x => x.user_id === player.user_id)) {\r\n                data.message = 'ERROR: Player already exists in game';\r\n                data.errCode = 3;\r\n                reject(data);\r\n                Logger(data, 'Data: ');\r\n            } else { \r\n                this.model('Game').findByIdAndUpdate(gameID, {$push: {players: player}})\r\n                    .then(updatedGame => {\r\n                        data.message = `Player ${player.username} has succesfully joined the game`;\r\n                        data.success = true;\r\n                        data.player = player;\r\n\r\n                        resolve(data);\r\n                        Logger(data, 'Data: ');\r\n                    })\r\n            }   \r\n        })\r\n    });\r\n\r\n   return promise;\r\n\r\n}\r\n\r\nvar Game = mongoose.model('Game', GameSchema);\r\n\r\nmodule.exports = Game;\n\n\n// WEBPACK FOOTER //\n// ./server/Models/Games.js","\r\nconst constants = {\r\n    MAX_PLAYERS: 2,\r\n}\r\n\r\n\r\n\r\nexport default constants;\n\n\n// WEBPACK FOOTER //\n// ./server/constants.js","const broadcast = (io, room, message, data) => {\r\n    console.log('broadcast', room, message, data);\r\n\r\n    io.in(room).emit(message, data)\r\n};\r\n\r\nexport default broadcast;\n\n\n// WEBPACK FOOTER //\n// ./server/broadcast.js","import express from 'express';\r\nimport validator from 'validator';\r\nimport passport from 'passport';\r\n\r\nconst router = new express.Router();\r\n\r\n//probably a syntatical error here (fixed)\r\n\r\nrouter.post('/signup', (req, res, next) => { \r\n passport.authenticate('local-signup', (err)=>{ \r\n\r\n    console.log('Code executing in server side /signup route');\r\n\r\n        if(err) {\r\n            console.log(err);\r\n\r\n           return res.status(400).json({\r\n                success:false,\r\n                message: 'error in signup post',\r\n            })\r\n        }\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            message: 'You have created a user'\r\n        });\r\n    })(req,res,next);\r\n})\r\n\r\n\r\nrouter.post('/login', (req,res,next) => {\r\n    passport.authenticate('local-login', (err, token, userData)=>{\r\n    if (err) {\r\n        console.log(err);\r\n        res.status(400).json({\r\n            success: false,\r\n            message: err.message\r\n        });\r\n    }\r\n\r\n    res.json({\r\n        success:true,\r\n        message: 'You have logged in',\r\n        token,\r\n        user:userData\r\n    });\r\n    \r\n})(req,res,next);\r\n})\r\n\r\nexport default router;\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/auth.js","module.exports = require(\"validator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"validator\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 26\n// module chunks = 0","const webpack = require('webpack');\r\nconst extractTextPlugin = require('extract-text-webpack-plugin');\r\n\r\nmodule.exports = {\r\n    entry: {\r\n        app: ['./src/index.jsx'],\r\n        vendor: ['react','react-dom','react-router','isomorphic-fetch','babel-polyfill', 'socket.io-client'],\r\n    },\r\n    output:{\r\n        path: __dirname + './static',\r\n        filename: 'app.bundle.js',\r\n    },\r\n    plugins: [\r\n        new webpack.optimize.CommonsChunkPlugin({name: 'vendor', filename: 'vendor.bundle.js'})\r\n    ],\r\n\r\n    module: {\r\n        loaders:[\r\n            {\r\n                test: /\\.jsx$/,\r\n                loader: 'babel-loader',\r\n                query: {\r\n                    presets: ['react', 'es2015'],\r\n                    plugins: ['transform-es2015-destructuring', 'transform-object-rest-spread']\r\n                }\r\n            },\r\n            {\r\n                test: /\\.css$/,\r\n                loader: 'style-loader'\r\n            },\r\n            {\r\n                test: /\\.css$/,\r\n                loader: 'css-loader',\r\n                query: {\r\n                    modules: true,\r\n                    localIdentName: '[name]__[local]___[hash:base64:5]',\r\n                    plugins: [\r\n                        new extractTextPlugin('./src/css/styles.css')\r\n                    ]\r\n                }\r\n            }\r\n        ]\r\n    },\r\n\r\n    devServer: {\r\n        port: 8000,\r\n        contentBase: 'static',\r\n        proxy: {\r\n            '/api/*' : {\r\n                target: 'http://localhost:3000'\r\n            }\r\n        }\r\n    },\r\n\r\n    devtool: 'source-map'\r\n}\n\n\n// WEBPACK FOOTER //\n// ./webpack.config.js","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 28\n// module chunks = 0"],"sourceRoot":""}